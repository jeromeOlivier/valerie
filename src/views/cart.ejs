<div id="cart_heading">
    <h4>Votre panier</h4>
</div>
<div id="cart_items">
    <% if (typeof cartItems === 'undefined' || cartItems.length === 0) { %>
        <div class="cart_item empty_cart">
            <p>Votre panier est vide</p>
        </div>
    <% } else { %>
        <% cartItems.forEach(item => { %>
            <% const title = item.title.toLowerCase(); %>
            <% const type = item.type.toLowerCase(); %>
            <div class="cart_item">
                <div class="cart_item_image">
                    <img src="/img/svg/<%= `${ title }_cover.svg`; %>" alt="<%= item.title; %>">
                </div>
                <div class="delete_cart_item">
                    <button hx-delete="cart/delete/<%= title %>/<%= type %>" hx-swap="innerHTML"
                            hx-target="#cart">&times;
                    </button>
                </div>
                <div class="cart_item_label bold">
                    Format:
                </div>
                <div class="cart_item_detail">
                    <%= item.type.toUpperCase(); %>
                </div>
                <div class="cart_item_label bold">
                    Prix:
                </div>
                <div class="cart_item_price bold">
                    <%= Number(item.total).toFixed(2); %>$ CAD
                </div>
                <label class="cart_item_label" for="quantity">
                    Quantit√©:
                </label>
                <div class="cart_item_quantity">
                    <select name="quantity" id="quantity" hx-put="cart/update/<%= title %>/<%= type %>"
                            hx-swap="innerHTML" hx-target="#cart">
                        <% for (let i = 1; i <= 3; i++) { %>
                            <option value="<%= i; %>" <% if (i === item.quantity) { %>selected
                                    <% } %>
                            ><%= i; %></option>
                        <% } %>
                    </select>
                </div>
            </div>
        <% }); %>
    <% } %>
</div>
<div id="cart_footer">
    <% if (typeof cart !== 'undefined') { %>
        <div>
            <button class="orange_button bold">Acheter</button>
        </div>
        <div id="cart_amounts">
            <div>sous-total:</div>
            <div><%= cart.subtotal %></div>
            <div>taxes:</div>
            <div><%= cart.taxes %></div>
            <div class="bold">total:</div>
            <div class="bold"><%= cart.total %></div>
        </div>
    <% } %>
</div>
